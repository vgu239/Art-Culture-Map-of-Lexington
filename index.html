<!DOCTYPE html>
<html>
<head>
  <meta charset="utf-8" />
  <title>Art & Culture Map of Lexington</title>
  <meta name="viewport" content="initial-scale=1,maximum-scale=1,user-scalable=no" />
  <script src="https://api.mapbox.com/mapbox-gl-js/v2.11.0/mapbox-gl.js"></script>
  <link href="https://api.mapbox.com/mapbox-gl-js/v2.11.0/mapbox-gl.css" rel="stylesheet" />
  <style>
    body { 
      margin: 0; 
      padding: 0; 
      font-family: "Georgia", serif;
      background-color: #fffdf8;
      color: #3e2723;
    }

    #map { 
      position: relative; 
      height: 600px; 
      width: 100%; 
      border: 2px solid #e0c9a6; 
      border-radius: 10px; 
      margin-bottom: 20px;
    }

    .map-link {
      text-align: center;
      margin-top: -10px;
      margin-bottom: 25px;
    }

    .map-link a {
      font-size: 15px;
      color: #1e88e5;
      text-decoration: none;
      font-weight: 500;
    }

    .map-link a:hover {
      text-decoration: underline;
    }

    .description {
      padding: 20px;
      max-width: 800px;
      margin: auto;
      line-height: 1.6;
    }

    .description h1 {
      font-weight: bold;
      font-size: 22px;
      margin-bottom: 5px;
      text-align: center;
    }

    .description h2 {
      font-weight: 600;
      font-size: 16px;
      margin-top: 0;
      margin-bottom: 10px;
      text-align: center;
    }

    .description p {
      font-size: 15px;
      text-align: justify;
    }

    /* Popup styling */
    .mapboxgl-popup {
      max-width: 260px;
      font-family: "Georgia", serif;
      background-color: #fffaf0;
      border-radius: 8px;
      box-shadow: 0 2px 8px rgba(0,0,0,0.15);
    }
    .mapboxgl-popup-content h3 {
      margin: 0 0 5px;
      font-size: 16px;
      color: #3e2723;
      font-weight: bold;
    }
    .mapboxgl-popup-content p {
      margin: 0 0 8px;
      font-size: 14px;
      color: #5d4037;
    }
    .mapboxgl-popup-content a {
      color: #1e88e5;
      text-decoration: none;
    }
    .mapboxgl-popup-content a:hover {
      text-decoration: underline;
    }
  </style>
</head>
<body>

<div id="map"></div>

<div class="map-link">
  <!-- Replace the URL below with the published version of your map -->
  <a href="https://api.mapbox.com/styles/v1/vgu239/cmgmgjgvh00b101qe8f8mde7j.html?title=view&access_token=pk.eyJ1Ijoidmd1MjM5IiwiYSI6ImNtZzFnZjZ2ODBuczkyaW9reDFtMDU3cDYifQ.CmVzAzn4cocOb8rnpY8G5Q&zoomwheel=true&fresh=true#10/38.015193/-84.547141" 
     target="_blank">ðŸ”— View Fullscreen Map</a>
</div>

<div class="description">
  <h1>Art & Culture Map of Lexington</h1>
  <h2>Prepared by Vipasa Gupta (2025), Department of Geography, University of Kentucky as a part of New Maps Plus Program</h2>
  <p>
    This map uses the coordinate reference system (CRS) <strong>EPSG:4326 â€“ WGS 84</strong>. 
    It highlights the vibrant art and culture spots in Lexington, Kentucky. 
    You can click on any of the art and culture features such as murals, statues, sculptures, art galleries, or theatres;
    to view detailed information about them in a popup window. 
    The map uses a soft pastel basemap to ensure that the cultural features stand out visually. 
    Footpaths are marked in orange to show trail routes that connect these points of interest, 
    while key areas and major roads are labeled for convenience and ease of navigation.
  </p>
</div>

<script>
  // --- Access Token ---
  mapboxgl.accessToken = 'pk.eyJ1Ijoidmd1MjM5IiwiYSI6ImNtZzFnZjZ2ODBuczkyaW9reDFtMDU3cDYifQ.CmVzAzn4cocOb8rnpY8G5Q';

  // --- Initialize Map ---
  const map = new mapboxgl.Map({
    container: 'map',
    style: 'mapbox://styles/vgu239/cmgmgjgvh00b101qe8f8mde7j',
    center: [-84.547141, 38.015193],
    zoom: 10
  });

  // --- Add Popups on Click ---
  map.on('click', (event) => {
    const features = map.queryRenderedFeatures(event.point, {
      layers: ['tourism-1f5ndu', 'centroid-1-d7fdtz']
    });

    if (!features.length) return;

    const feature = features[0];
    const props = feature.properties;

    const name = props.name || props.Name || 'Unnamed Place';
    const description = props.description || props.Description || '';
    const website = props.website || props.Website || '';

    let address = '';
    if (feature.layer.id === 'tourism-1f5ndu') {
      address = props['addr:city'] || props['Addr:City'] || '';
    } else if (feature.layer.id === 'centroid-1-d7fdtz') {
      address = props['addr:street'] || props['Addr:Street'] || '';
    }

    const htmlContent = `
      <h3>${name}</h3>
      <p>${description}</p>
      ${address ? `<p><strong>Address:</strong> ${address}</p>` : ''}
      ${website ? `<p><a href="${website}" target="_blank">Visit Website</a></p>` : ''}
    `;

    new mapboxgl.Popup({ offset: [0, -15] })
      .setLngLat(feature.geometry.coordinates)
      .setHTML(htmlContent)
      .addTo(map);
  });

  // --- Add Geolocate Control ---
  map.addControl(new mapboxgl.GeolocateControl({
    positionOptions: { enableHighAccuracy: true },
    trackUserLocation: true
  }));
</script>

</body>
</html>
